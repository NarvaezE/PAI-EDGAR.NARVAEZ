<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>
			Vue Datos
		</title>
		<style type="text/css">
			table, th, td {
			  border: 1px solid black;
			}
		</style>
	</head>
	<body>

		<div id="contenedor">

			<h1>
				Bienvenido {{ user }}    
			</h1>

			<button @click="onAction = (onAction)?false:true">
				Agregar usuario
			</button>

			<br>

			<table v-if="onAction == false">
				<thead>
					<tr>
						<th>
							#
						</th>
						<th>
							Name
						</th>
						<th>
							Username
						</th>
						<th>
							Email
						</th> 
						<th>
							Phone
						</th>
						<th>
							website
						</th> 
						<th>
							Actions
						</th>
					</tr>
				</thead>

				<tbody>

					<tr v-for="u in users">
						<th>
							{{ u.id }}
						</th>
						<th>
							{{ u.name }}
						</th>
						<th>
							{{ u.username }}
						</th>
						<th>
							{{ u.email }}
						</th> 
						<th>
							{{ u.phone }}
						</th>
						<th>
							{{ u.website }}
						</th> 
						<th>
							<button>
								Edit
							</button>
							<button>
								Delete
							</button>
						</th>
					</tr>

				</tbody>

				<tfoot>
					<tr>
						<th>
							#
						</th>
						<th>
							Name
						</th>
						<th>
							Username
						</th>
						<th>
							Email
						</th> 
						<th>
							Phone
						</th>
						<th>
							website
						</th> 
						<th>
							Actions
						</th>
					</tr>
				</tfoot>
			</table>

			<div v-else>
				<form>
					<fieldset>
						<legend>
							Agregar nuevo usuario
						</legend>

						<label>
							Name
						</label>
						<input type="text" v-model="name" name="" required>
						<br>
						
						<label>
							Username
						</label>
						<input type="text" v-model="username" username="" required>
						<br>
						
						<label>
							Email
						</label>
						<input type="email" v-model="email" email="" required>
						<br>
						
						<label>
							Phone
						</label>
						<input type="tel" v-model="phone" phone="" required>
						<br>
						
						<label>
							Website
						</label>
						<input type="text" v-model="website" website="" required>
						<br>

						<button @click="save">
							Guardar
						</button>
						<button>
							Cancelar
						</button>
					</fieldset>
				</form>
			</div>

		</div>

		<script src="https://unpkg.com/vue@3"></script>
		<script type="text/javascript">
			const { createApp } = Vue

			const app = createApp({
				data(){
					return{ 
						user:'',
						users:null, 
						onAction:false,
						name:'',
						username:'',
						email:'',
						phone:'',
						website:''
					}
				},
				methods:{
					save(e){
						// var datos ={
						// 	name:this.name,
						// 	username:this.username,
						// 	email:this.email,
						// 	phone:this.phone,
						// 	website:this.website
						// };
						// this.users.push(datos);
						// localStorage.setItem('user', JSON.stringify(datos));
						// name:'';
						// username:'';
						// email:'';
						// phone:'';
						// website:'';
					}

				},
				mounted(){

					var usr = localStorage.getItem('user');
					usr = JSON.parse(usr);    
					this.user = usr.name;

					fetch('data/users.json')
					.then((res) => res.json())
					.then((json) => ( this.users = json ))
					.catch((err) => ( alert('no data') ))
				}
			}).mount('#contenedor')

		</script>
	</body>
</html>